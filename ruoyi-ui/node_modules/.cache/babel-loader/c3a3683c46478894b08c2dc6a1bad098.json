{"remainingRequest":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/babel-loader/lib/index.js!/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhaosh/github/wdh-pmp/ruoyi-ui/src/utils/request.js","dependencies":[{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/src/utils/request.js","mtime":1645289502000},{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/babel.config.js","mtime":1645289502000},{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/cache-loader/dist/cjs.js","mtime":1646568386999},{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/babel-loader/lib/index.js","mtime":1646568387812},{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1646568387151}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvemhhb3NoL2dpdGh1Yi93ZGgtcG1wL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKZXhwb3J0cy5kb3dubG9hZCA9IGRvd25sb2FkOwpleHBvcnRzLmlzUmVsb2dpbiA9IHZvaWQgMDsKCnJlcXVpcmUoInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIpOwoKdmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL3poYW9zaC9naXRodWIvd2RoLXBtcC9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIikpOwoKdmFyIF90eXBlb2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvemhhb3NoL2dpdGh1Yi93ZGgtcG1wL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZi5qcyIpKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIik7Cgp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKCnZhciBfZWxlbWVudFVpID0gcmVxdWlyZSgiZWxlbWVudC11aSIpOwoKdmFyIF9zdG9yZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9zdG9yZSIpKTsKCnZhciBfYXV0aCA9IHJlcXVpcmUoIkAvdXRpbHMvYXV0aCIpOwoKdmFyIF9lcnJvckNvZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvdXRpbHMvZXJyb3JDb2RlIikpOwoKdmFyIF9ydW95aSA9IHJlcXVpcmUoIkAvdXRpbHMvcnVveWkiKTsKCnZhciBfY2FjaGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvcGx1Z2lucy9jYWNoZSIpKTsKCnZhciBfZmlsZVNhdmVyID0gcmVxdWlyZSgiZmlsZS1zYXZlciIpOwoKdmFyIGRvd25sb2FkTG9hZGluZ0luc3RhbmNlOyAvLyDmmK/lkKbmmL7npLrph43mlrDnmbvlvZUKCnZhciBpc1JlbG9naW4gPSB7CiAgc2hvdzogZmFsc2UKfTsKZXhwb3J0cy5pc1JlbG9naW4gPSBpc1JlbG9naW47Cl9heGlvcy5kZWZhdWx0LmRlZmF1bHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCc7IC8vIOWIm+W7umF4aW9z5a6e5L6LCgp2YXIgc2VydmljZSA9IF9heGlvcy5kZWZhdWx0LmNyZWF0ZSh7CiAgLy8gYXhpb3PkuK3or7fmsYLphY3nva7mnIliYXNlVVJM6YCJ6aG577yM6KGo56S66K+35rGCVVJM5YWs5YWx6YOo5YiGCiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAvLyDotoXml7YKICB0aW1lb3V0OiAxMDAwMAp9KTsgLy8gcmVxdWVzdOaLpuaIquWZqAoKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyDmmK/lkKbpnIDopoHorr7nva4gdG9rZW4KICB2YXIgaXNUb2tlbiA9IChjb25maWcuaGVhZGVycyB8fCB7fSkuaXNUb2tlbiA9PT0gZmFsc2U7IC8vIOaYr+WQpumcgOimgemYsuatouaVsOaNrumHjeWkjeaPkOS6pAoKICB2YXIgaXNSZXBlYXRTdWJtaXQgPSAoY29uZmlnLmhlYWRlcnMgfHwge30pLnJlcGVhdFN1Ym1pdCA9PT0gZmFsc2U7CgogIGlmICgoMCwgX2F1dGguZ2V0VG9rZW4pKCkgJiYgIWlzVG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICcgKyAoMCwgX2F1dGguZ2V0VG9rZW4pKCk7IC8vIOiuqeavj+S4quivt+axguaQuuW4puiHquWumuS5iXRva2VuIOivt+agueaNruWunumZheaDheWGteiHquihjOS/ruaUuQogIH0gLy8gZ2V06K+35rGC5pig5bCEcGFyYW1z5Y+C5pWwCgoKICBpZiAoY29uZmlnLm1ldGhvZCA9PT0gJ2dldCcgJiYgY29uZmlnLnBhcmFtcykgewogICAgdmFyIHVybCA9IGNvbmZpZy51cmwgKyAnPycgKyAoMCwgX3J1b3lpLnRhbnNQYXJhbXMpKGNvbmZpZy5wYXJhbXMpOwogICAgdXJsID0gdXJsLnNsaWNlKDAsIC0xKTsKICAgIGNvbmZpZy5wYXJhbXMgPSB7fTsKICAgIGNvbmZpZy51cmwgPSB1cmw7CiAgfQoKICBpZiAoIWlzUmVwZWF0U3VibWl0ICYmIChjb25maWcubWV0aG9kID09PSAncG9zdCcgfHwgY29uZmlnLm1ldGhvZCA9PT0gJ3B1dCcpKSB7CiAgICB2YXIgcmVxdWVzdE9iaiA9IHsKICAgICAgdXJsOiBjb25maWcudXJsLAogICAgICBkYXRhOiAoMCwgX3R5cGVvZjIuZGVmYXVsdCkoY29uZmlnLmRhdGEpID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KGNvbmZpZy5kYXRhKSA6IGNvbmZpZy5kYXRhLAogICAgICB0aW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgfTsKCiAgICB2YXIgc2Vzc2lvbk9iaiA9IF9jYWNoZS5kZWZhdWx0LnNlc3Npb24uZ2V0SlNPTignc2Vzc2lvbk9iaicpOwoKICAgIGlmIChzZXNzaW9uT2JqID09PSB1bmRlZmluZWQgfHwgc2Vzc2lvbk9iaiA9PT0gbnVsbCB8fCBzZXNzaW9uT2JqID09PSAnJykgewogICAgICBfY2FjaGUuZGVmYXVsdC5zZXNzaW9uLnNldEpTT04oJ3Nlc3Npb25PYmonLCByZXF1ZXN0T2JqKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBzX3VybCA9IHNlc3Npb25PYmoudXJsOyAvLyDor7fmsYLlnLDlnYAKCiAgICAgIHZhciBzX2RhdGEgPSBzZXNzaW9uT2JqLmRhdGE7IC8vIOivt+axguaVsOaNrgoKICAgICAgdmFyIHNfdGltZSA9IHNlc3Npb25PYmoudGltZTsgLy8g6K+35rGC5pe26Ze0CgogICAgICB2YXIgaW50ZXJ2YWwgPSAxMDAwOyAvLyDpl7TpmpTml7bpl7QobXMp77yM5bCP5LqO5q2k5pe26Ze06KeG5Li66YeN5aSN5o+Q5LqkCgogICAgICBpZiAoc19kYXRhID09PSByZXF1ZXN0T2JqLmRhdGEgJiYgcmVxdWVzdE9iai50aW1lIC0gc190aW1lIDwgaW50ZXJ2YWwgJiYgc191cmwgPT09IHJlcXVlc3RPYmoudXJsKSB7CiAgICAgICAgdmFyIG1lc3NhZ2UgPSAn5pWw5o2u5q2j5Zyo5aSE55CG77yM6K+35Yu/6YeN5aSN5o+Q5LqkJzsKICAgICAgICBjb25zb2xlLndhcm4oIlsiLmNvbmNhdChzX3VybCwgIl06ICIpICsgbWVzc2FnZSk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihtZXNzYWdlKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2NhY2hlLmRlZmF1bHQuc2Vzc2lvbi5zZXRKU09OKCdzZXNzaW9uT2JqJywgcmVxdWVzdE9iaik7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKGVycm9yKTsKICBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyDlk43lupTmi6bmiKrlmagKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzKSB7CiAgLy8g5pyq6K6+572u54q25oCB56CB5YiZ6buY6K6k5oiQ5Yqf54q25oCBCiAgdmFyIGNvZGUgPSByZXMuZGF0YS5jb2RlIHx8IDIwMDsgLy8g6I635Y+W6ZSZ6K+v5L+h5oGvCgogIHZhciBtc2cgPSBfZXJyb3JDb2RlLmRlZmF1bHRbY29kZV0gfHwgcmVzLmRhdGEubXNnIHx8IF9lcnJvckNvZGUuZGVmYXVsdFsnZGVmYXVsdCddOyAvLyDkuozov5vliLbmlbDmja7liJnnm7TmjqXov5Tlm54KCiAgaWYgKHJlcy5yZXF1ZXN0LnJlc3BvbnNlVHlwZSA9PT0gJ2Jsb2InIHx8IHJlcy5yZXF1ZXN0LnJlc3BvbnNlVHlwZSA9PT0gJ2FycmF5YnVmZmVyJykgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0KCiAgaWYgKGNvZGUgPT09IDQwMSkgewogICAgaWYgKCFpc1JlbG9naW4uc2hvdykgewogICAgICBpc1JlbG9naW4uc2hvdyA9IHRydWU7CgogICAgICBfZWxlbWVudFVpLk1lc3NhZ2VCb3guY29uZmlybSgn55m75b2V54q25oCB5bey6L+H5pyf77yM5oKo5Y+v5Lul57un57ut55WZ5Zyo6K+l6aG16Z2i77yM5oiW6ICF6YeN5paw55m75b2VJywgJ+ezu+e7n+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGlzUmVsb2dpbi5zaG93ID0gZmFsc2U7CgogICAgICAgIF9zdG9yZS5kZWZhdWx0LmRpc3BhdGNoKCdMb2dPdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnL2luZGV4JzsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIGlzUmVsb2dpbi5zaG93ID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgn5peg5pWI55qE5Lya6K+d77yM5oiW6ICF5Lya6K+d5bey6L+H5pyf77yM6K+36YeN5paw55m75b2V44CCJyk7CiAgfSBlbHNlIGlmIChjb2RlID09PSA1MDApIHsKICAgICgwLCBfZWxlbWVudFVpLk1lc3NhZ2UpKHsKICAgICAgbWVzc2FnZTogbXNnLAogICAgICB0eXBlOiAnZXJyb3InCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IobXNnKSk7CiAgfSBlbHNlIGlmIChjb2RlICE9PSAyMDApIHsKICAgIF9lbGVtZW50VWkuTm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgdGl0bGU6IG1zZwogICAgfSk7CgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdlcnJvcicpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzLmRhdGE7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZygnZXJyJyArIGVycm9yKTsKICB2YXIgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CgogIGlmIChtZXNzYWdlID09ICJOZXR3b3JrIEVycm9yIikgewogICAgbWVzc2FnZSA9ICLlkI7nq6/mjqXlj6Pov57mjqXlvILluLgiOwogIH0gZWxzZSBpZiAobWVzc2FnZS5pbmNsdWRlcygidGltZW91dCIpKSB7CiAgICBtZXNzYWdlID0gIuezu+e7n+aOpeWPo+ivt+axgui2heaXtiI7CiAgfSBlbHNlIGlmIChtZXNzYWdlLmluY2x1ZGVzKCJSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlIikpIHsKICAgIG1lc3NhZ2UgPSAi57O757uf5o6l5Y+jIiArIG1lc3NhZ2Uuc3Vic3RyKG1lc3NhZ2UubGVuZ3RoIC0gMykgKyAi5byC5bi4IjsKICB9CgogICgwLCBfZWxlbWVudFVpLk1lc3NhZ2UpKHsKICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICB0eXBlOiAnZXJyb3InLAogICAgZHVyYXRpb246IDUgKiAxMDAwCiAgfSk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIOmAmueUqOS4i+i9veaWueazlQoKZnVuY3Rpb24gZG93bmxvYWQodXJsLCBwYXJhbXMsIGZpbGVuYW1lKSB7CiAgZG93bmxvYWRMb2FkaW5nSW5zdGFuY2UgPSBfZWxlbWVudFVpLkxvYWRpbmcuc2VydmljZSh7CiAgICB0ZXh0OiAi5q2j5Zyo5LiL6L295pWw5o2u77yM6K+356iN5YCZIiwKICAgIHNwaW5uZXI6ICJlbC1pY29uLWxvYWRpbmciLAogICAgYmFja2dyb3VuZDogInJnYmEoMCwgMCwgMCwgMC43KSIKICB9KTsKICByZXR1cm4gc2VydmljZS5wb3N0KHVybCwgcGFyYW1zLCB7CiAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gKHBhcmFtcykgewogICAgICByZXR1cm4gKDAsIF9ydW95aS50YW5zUGFyYW1zKShwYXJhbXMpOwogICAgfV0sCiAgICBoZWFkZXJzOiB7CiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgfSwKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InCiAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZGF0YSkgewogICAgICB2YXIgaXNMb2dpbiwgYmxvYiwgcmVzVGV4dCwgcnNwT2JqLCBlcnJNc2c7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gKDAsIF9ydW95aS5ibG9iVmFsaWRhdGUpKGRhdGEpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGlzTG9naW4gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWlzTG9naW4pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBibG9iID0gbmV3IEJsb2IoW2RhdGFdKTsKICAgICAgICAgICAgICAoMCwgX2ZpbGVTYXZlci5zYXZlQXMpKGJsb2IsIGZpbGVuYW1lKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIHJldHVybiBkYXRhLnRleHQoKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgcmVzVGV4dCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgcnNwT2JqID0gSlNPTi5wYXJzZShyZXNUZXh0KTsKICAgICAgICAgICAgICBlcnJNc2cgPSBfZXJyb3JDb2RlLmRlZmF1bHRbcnNwT2JqLmNvZGVdIHx8IHJzcE9iai5tc2cgfHwgX2Vycm9yQ29kZS5kZWZhdWx0WydkZWZhdWx0J107CgogICAgICAgICAgICAgIF9lbGVtZW50VWkuTWVzc2FnZS5lcnJvcihlcnJNc2cpOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBkb3dubG9hZExvYWRpbmdJbnN0YW5jZS5jbG9zZSgpOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyKSB7CiAgICBjb25zb2xlLmVycm9yKHIpOwoKICAgIF9lbGVtZW50VWkuTWVzc2FnZS5lcnJvcign5LiL6L295paH5Lu25Ye6546w6ZSZ6K+v77yM6K+36IGU57O7566h55CG5ZGY77yBJyk7CgogICAgZG93bmxvYWRMb2FkaW5nSW5zdGFuY2UuY2xvc2UoKTsKICB9KTsKfQoKdmFyIF9kZWZhdWx0ID0gc2VydmljZTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/zhaosh/github/wdh-pmp/ruoyi-ui/src/utils/request.js"],"names":["downloadLoadingInstance","isRelogin","show","axios","defaults","headers","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","isToken","isRepeatSubmit","repeatSubmit","method","params","url","slice","requestObj","data","JSON","stringify","time","Date","getTime","sessionObj","cache","session","getJSON","undefined","setJSON","s_url","s_data","s_time","interval","message","console","warn","Promise","reject","Error","error","log","response","res","code","msg","errorCode","responseType","MessageBox","confirm","confirmButtonText","cancelButtonText","type","then","store","dispatch","location","href","catch","Notification","title","includes","substr","length","duration","download","filename","Loading","text","spinner","background","post","transformRequest","isLogin","blob","Blob","resText","rspObj","parse","errMsg","Message","close","r"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport { Notification, MessageBox, Message, Loading } from 'element-ui'\r\nimport store from '@/store'\r\nimport { getToken } from '@/utils/auth'\r\nimport errorCode from '@/utils/errorCode'\r\nimport { tansParams, blobValidate } from \"@/utils/ruoyi\";\r\nimport cache from '@/plugins/cache'\r\nimport { saveAs } from 'file-saver'\r\n\r\nlet downloadLoadingInstance;\r\n// 是否显示重新登录\r\nexport let isRelogin = { show: false };\r\n\r\naxios.defaults.headers['Content-Type'] = 'application/json;charset=utf-8'\r\n// 创建axios实例\r\nconst service = axios.create({\r\n  // axios中请求配置有baseURL选项，表示请求URL公共部分\r\n  baseURL: process.env.VUE_APP_BASE_API,\r\n  // 超时\r\n  timeout: 10000\r\n})\r\n\r\n// request拦截器\r\nservice.interceptors.request.use(config => {\r\n  // 是否需要设置 token\r\n  const isToken = (config.headers || {}).isToken === false\r\n  // 是否需要防止数据重复提交\r\n  const isRepeatSubmit = (config.headers || {}).repeatSubmit === false\r\n  if (getToken() && !isToken) {\r\n    config.headers['Authorization'] = 'Bearer ' + getToken() // 让每个请求携带自定义token 请根据实际情况自行修改\r\n  }\r\n  // get请求映射params参数\r\n  if (config.method === 'get' && config.params) {\r\n    let url = config.url + '?' + tansParams(config.params);\r\n    url = url.slice(0, -1);\r\n    config.params = {};\r\n    config.url = url;\r\n  }\r\n  if (!isRepeatSubmit && (config.method === 'post' || config.method === 'put')) {\r\n    const requestObj = {\r\n      url: config.url,\r\n      data: typeof config.data === 'object' ? JSON.stringify(config.data) : config.data,\r\n      time: new Date().getTime()\r\n    }\r\n    const sessionObj = cache.session.getJSON('sessionObj')\r\n    if (sessionObj === undefined || sessionObj === null || sessionObj === '') {\r\n      cache.session.setJSON('sessionObj', requestObj)\r\n    } else {\r\n      const s_url = sessionObj.url;                  // 请求地址\r\n      const s_data = sessionObj.data;                // 请求数据\r\n      const s_time = sessionObj.time;                // 请求时间\r\n      const interval = 1000;                         // 间隔时间(ms)，小于此时间视为重复提交\r\n      if (s_data === requestObj.data && requestObj.time - s_time < interval && s_url === requestObj.url) {\r\n        const message = '数据正在处理，请勿重复提交';\r\n        console.warn(`[${s_url}]: ` + message)\r\n        return Promise.reject(new Error(message))\r\n      } else {\r\n        cache.session.setJSON('sessionObj', requestObj)\r\n      }\r\n    }\r\n  }\r\n  return config\r\n}, error => {\r\n    console.log(error)\r\n    Promise.reject(error)\r\n})\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(res => {\r\n    // 未设置状态码则默认成功状态\r\n    const code = res.data.code || 200;\r\n    // 获取错误信息\r\n    const msg = errorCode[code] || res.data.msg || errorCode['default']\r\n    // 二进制数据则直接返回\r\n    if(res.request.responseType ===  'blob' || res.request.responseType ===  'arraybuffer'){\r\n      return res.data\r\n    }\r\n    if (code === 401) {\r\n      if (!isRelogin.show) {\r\n        isRelogin.show = true;\r\n        MessageBox.confirm('登录状态已过期，您可以继续留在该页面，或者重新登录', '系统提示', {\r\n          confirmButtonText: '重新登录',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }\r\n      ).then(() => {\r\n        isRelogin.show = false;\r\n        store.dispatch('LogOut').then(() => {\r\n          location.href = '/index';\r\n        })\r\n      }).catch(() => {\r\n        isRelogin.show = false;\r\n      });\r\n    }\r\n      return Promise.reject('无效的会话，或者会话已过期，请重新登录。')\r\n    } else if (code === 500) {\r\n      Message({\r\n        message: msg,\r\n        type: 'error'\r\n      })\r\n      return Promise.reject(new Error(msg))\r\n    } else if (code !== 200) {\r\n      Notification.error({\r\n        title: msg\r\n      })\r\n      return Promise.reject('error')\r\n    } else {\r\n      return res.data\r\n    }\r\n  },\r\n  error => {\r\n    console.log('err' + error)\r\n    let { message } = error;\r\n    if (message == \"Network Error\") {\r\n      message = \"后端接口连接异常\";\r\n    }\r\n    else if (message.includes(\"timeout\")) {\r\n      message = \"系统接口请求超时\";\r\n    }\r\n    else if (message.includes(\"Request failed with status code\")) {\r\n      message = \"系统接口\" + message.substr(message.length - 3) + \"异常\";\r\n    }\r\n    Message({\r\n      message: message,\r\n      type: 'error',\r\n      duration: 5 * 1000\r\n    })\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 通用下载方法\r\nexport function download(url, params, filename) {\r\n  downloadLoadingInstance = Loading.service({ text: \"正在下载数据，请稍候\", spinner: \"el-icon-loading\", background: \"rgba(0, 0, 0, 0.7)\", })\r\n  return service.post(url, params, {\r\n    transformRequest: [(params) => { return tansParams(params) }],\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n    responseType: 'blob'\r\n  }).then(async (data) => {\r\n    const isLogin = await blobValidate(data);\r\n    if (isLogin) {\r\n      const blob = new Blob([data])\r\n      saveAs(blob, filename)\r\n    } else {\r\n      const resText = await data.text();\r\n      const rspObj = JSON.parse(resText);\r\n      const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default']\r\n      Message.error(errMsg);\r\n    }\r\n    downloadLoadingInstance.close();\r\n  }).catch((r) => {\r\n    console.error(r)\r\n    Message.error('下载文件出现错误，请联系管理员！')\r\n    downloadLoadingInstance.close();\r\n  })\r\n}\r\n\r\nexport default service\r\n"]}]}