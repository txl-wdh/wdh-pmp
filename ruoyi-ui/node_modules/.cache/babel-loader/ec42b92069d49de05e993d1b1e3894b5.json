{"remainingRequest":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/babel-loader/lib/index.js!/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhaosh/github/wdh-pmp/ruoyi-ui/src/plugins/download.js","dependencies":[{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/src/plugins/download.js","mtime":1645289502000},{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/babel.config.js","mtime":1645289502000},{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/cache-loader/dist/cjs.js","mtime":1646568386999},{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/babel-loader/lib/index.js","mtime":1646568387812},{"path":"/Users/zhaosh/github/wdh-pmp/ruoyi-ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1646568387151}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvemhhb3NoL2dpdGh1Yi93ZGgtcG1wL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnJlcXVpcmUoInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIpOwoKdmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL3poYW9zaC9naXRodWIvd2RoLXBtcC9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIikpOwoKdmFyIF9heGlvcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiYXhpb3MiKSk7Cgp2YXIgX2VsZW1lbnRVaSA9IHJlcXVpcmUoImVsZW1lbnQtdWkiKTsKCnZhciBfZmlsZVNhdmVyID0gcmVxdWlyZSgiZmlsZS1zYXZlciIpOwoKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Cgp2YXIgX2Vycm9yQ29kZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy9lcnJvckNvZGUiKSk7Cgp2YXIgX3J1b3lpID0gcmVxdWlyZSgiQC91dGlscy9ydW95aSIpOwoKdmFyIGJhc2VVUkwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJOwp2YXIgX2RlZmF1bHQgPSB7CiAgemlwOiBmdW5jdGlvbiB6aXAodXJsLCBuYW1lKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciB1cmwgPSBiYXNlVVJMICsgdXJsOwogICAgKDAsIF9heGlvcy5kZWZhdWx0KSh7CiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHVybDogdXJsLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICAgIH0KICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzKSB7CiAgICAgICAgdmFyIGlzTG9naW4sIGJsb2I7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9ydW95aS5ibG9iVmFsaWRhdGUpKHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgaXNMb2dpbiA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGlzTG9naW4pIHsKICAgICAgICAgICAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFtyZXMuZGF0YV0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vemlwJwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnNhdmVBcyhibG9iLCBuYW1lKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnByaW50RXJyTXNnKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpKTsKICB9LAogIHNhdmVBczogZnVuY3Rpb24gc2F2ZUFzKHRleHQsIG5hbWUsIG9wdHMpIHsKICAgICgwLCBfZmlsZVNhdmVyLnNhdmVBcykodGV4dCwgbmFtZSwgb3B0cyk7CiAgfSwKICBwcmludEVyck1zZzogZnVuY3Rpb24gcHJpbnRFcnJNc2coZGF0YSkgewogICAgcmV0dXJuICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHJlc1RleHQsIHJzcE9iaiwgZXJyTXNnOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZGF0YS50ZXh0KCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzVGV4dCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHJzcE9iaiA9IEpTT04ucGFyc2UocmVzVGV4dCk7CiAgICAgICAgICAgICAgZXJyTXNnID0gX2Vycm9yQ29kZS5kZWZhdWx0W3JzcE9iai5jb2RlXSB8fCByc3BPYmoubXNnIHx8IF9lcnJvckNvZGUuZGVmYXVsdFsnZGVmYXVsdCddOwoKICAgICAgICAgICAgICBfZWxlbWVudFVpLk1lc3NhZ2UuZXJyb3IoZXJyTXNnKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/zhaosh/github/wdh-pmp/ruoyi-ui/src/plugins/download.js"],"names":["baseURL","process","env","VUE_APP_BASE_API","zip","url","name","method","responseType","headers","then","res","data","isLogin","blob","Blob","type","saveAs","printErrMsg","text","opts","resText","rspObj","JSON","parse","errMsg","errorCode","code","msg","Message","error"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;eAEe;AACbC,EAAAA,GADa,eACTC,GADS,EACJC,IADI,EACE;AAAA;;AACb,QAAID,GAAG,GAAGL,OAAO,GAAGK,GAApB;AACA,wBAAM;AACJE,MAAAA,MAAM,EAAE,KADJ;AAEJF,MAAAA,GAAG,EAAEA,GAFD;AAGJG,MAAAA,YAAY,EAAE,MAHV;AAIJC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAY;AAA/B;AAJL,KAAN,EAKGC,IALH;AAAA,uFAKQ,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACgB,yBAAaA,GAAG,CAACC,IAAjB,CADhB;;AAAA;AACAC,gBAAAA,OADA;;AAEN,oBAAIA,OAAJ,EAAa;AACLC,kBAAAA,IADK,GACE,IAAIC,IAAJ,CAAS,CAACJ,GAAG,CAACC,IAAL,CAAT,EAAqB;AAAEI,oBAAAA,IAAI,EAAE;AAAR,mBAArB,CADF;;AAEX,kBAAA,KAAI,CAACC,MAAL,CAAYH,IAAZ,EAAkBR,IAAlB;AACD,iBAHD,MAGO;AACL,kBAAA,KAAI,CAACY,WAAL,CAAiBP,GAAG,CAACC,IAArB;AACD;;AAPK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OALR;;AAAA;AAAA;AAAA;AAAA;AAcD,GAjBY;AAkBbK,EAAAA,MAlBa,kBAkBNE,IAlBM,EAkBAb,IAlBA,EAkBMc,IAlBN,EAkBY;AACvB,2BAAOD,IAAP,EAAab,IAAb,EAAmBc,IAAnB;AACD,GApBY;AAqBPF,EAAAA,WArBO,uBAqBKN,IArBL,EAqBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACAA,IAAI,CAACO,IAAL,EADA;;AAAA;AAChBE,cAAAA,OADgB;AAEhBC,cAAAA,MAFgB,GAEPC,IAAI,CAACC,KAAL,CAAWH,OAAX,CAFO;AAGhBI,cAAAA,MAHgB,GAGPC,mBAAUJ,MAAM,CAACK,IAAjB,KAA0BL,MAAM,CAACM,GAAjC,IAAwCF,mBAAU,SAAV,CAHjC;;AAItBG,iCAAQC,KAAR,CAAcL,MAAd;;AAJsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKvB;AA1BY,C","sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport { saveAs } from 'file-saver'\r\nimport { getToken } from '@/utils/auth'\r\nimport errorCode from '@/utils/errorCode'\r\nimport { blobValidate } from \"@/utils/ruoyi\";\r\n\r\nconst baseURL = process.env.VUE_APP_BASE_API\r\n\r\nexport default {\r\n  zip(url, name) {\r\n    var url = baseURL + url\r\n    axios({\r\n      method: 'get',\r\n      url: url,\r\n      responseType: 'blob',\r\n      headers: { 'Authorization': 'Bearer ' + getToken() }\r\n    }).then(async (res) => {\r\n      const isLogin = await blobValidate(res.data);\r\n      if (isLogin) {\r\n        const blob = new Blob([res.data], { type: 'application/zip' })\r\n        this.saveAs(blob, name)\r\n      } else {\r\n        this.printErrMsg(res.data);\r\n      }\r\n    })\r\n  },\r\n  saveAs(text, name, opts) {\r\n    saveAs(text, name, opts);\r\n  },\r\n  async printErrMsg(data) {\r\n    const resText = await data.text();\r\n    const rspObj = JSON.parse(resText);\r\n    const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default']\r\n    Message.error(errMsg);\r\n  }\r\n}\r\n\r\n"]}]}